<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.13">
<meta name="description" content="Technical Overview">
<title>Zimbra Collaboration: Technical Overview</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/styles/github.min.css">
</head>
<body class="book">
<div id="header">
<h1>Zimbra Collaboration: Technical Overview</h1>
<div class="details">
<span id="revnumber">version 1.2,</span>
<span id="revdate">Jun, 2021</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Contents</div>
<ul class="sectlevel1">
<li><a href="#overview">1. Zimbra Overview</a>
<ul class="sectlevel2">
<li><a href="#_new_features_with_zimbra">1.1. New Features with Zimbra</a></li>
<li><a href="#_other_features">1.2. Other Features</a></li>
<li><a href="#_zimbra_multi_tenancy_value_addition">1.3. Zimbra Multi-Tenancy Value Addition</a></li>
</ul>
</li>
<li><a href="#tech">2. Technical Overview</a>
<ul class="sectlevel2">
<li><a href="#_zimbra_components">2.1. Zimbra Components</a></li>
<li><a href="#_zimbra_application_packages">2.2. Zimbra Application Packages</a></li>
<li><a href="#_supported_operating_systems">2.3. Supported Operating Systems</a></li>
<li><a href="#_zimbra_components_overview">2.4. Zimbra Components Overview</a></li>
<li><a href="#_client_access">2.5. Client Access</a></li>
</ul>
</li>
<li><a href="#architecture">3. Zimbra Architecture</a>
<ul class="sectlevel2">
<li><a href="#_message_and_file_store">3.1. Message and File Store</a></li>
<li><a href="#_metadata_sql_store">3.2. Metadata SQL Store</a></li>
<li><a href="#_search">3.3. Search</a></li>
<li><a href="#_lucene_index">3.4. Lucene Index</a></li>
<li><a href="#_other_services_and_access_methods">3.5. Other Services and Access Methods</a></li>
</ul>
</li>
<li><a href="#HA">4. High Availability and Scalability</a>
<ul class="sectlevel2">
<li><a href="#_high_availability">4.1. High Availability</a></li>
<li><a href="#_scalability">4.2. Scalability</a></li>
</ul>
</li>
<li><a href="#approach">5. Proposed Project Approach</a>
<ul class="sectlevel2">
<li><a href="#_assessment_and_solution_design">5.1. Assessment and Solution Design</a></li>
<li><a href="#_zimbra_deployment_and_configuration">5.2. Zimbra Deployment and Configuration</a></li>
<li><a href="#_testing">5.3. Testing</a></li>
<li><a href="#_migration">5.4. Migration</a></li>
<li><a href="#_audit_and_operations">5.5. Audit and Operations</a></li>
</ul>
</li>
<li><a href="#zimbra_ports">Appendix A: ZCS Firewall Ports</a>
<ul class="sectlevel2">
<li><a href="#_inside_firewall_ports">A.1. Inside Firewall Ports</a></li>
<li><a href="#_outside_firewall_ports">A.2. Outside Firewall Ports</a></li>
</ul>
</li>
<li><a href="#TALK">Appendix B: Zimbra Connect</a></li>
<li><a href="#zimbra_docs">Appendix C: Zimbra Docs</a>
<ul class="sectlevel2">
<li><a href="#_components">C.1. Components</a></li>
<li><a href="#_document_management_flow">C.2. Document Management Flow</a></li>
<li><a href="#_networking_and_ports">C.3. Networking and ports</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
<!-- toc disabled -->
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Copyright &#169; 2021 Synacor, Inc.<br>
All rights reserved.</p>
</div>
<div class="paragraph">
<p>Confidential.</p>
</div>
<div class="paragraph">
<p>No part of this publication may be reproduced, distributed, or transmitted in any form or by any means, including photocopying, recording, or other electronic or mechanical methods, without the prior written permission of the publisher, except in the case of brief quotations embodied in critical reviews and certain other noncommercial uses permitted by copyright law.
For permission requests, write to the publisher, addressed “Attention: Permissions Coordinator”, at the address below.</p>
</div>
<div class="paragraph">
<p>Synacor, Inc.<br>
40 La Riviere Drive, Suite 300<br>
Buffalo, New York 14202<br>
<a href="https://www.synacor.com">www.synacor.com</a></p>
</div>
<div class="paragraph">
<p>Revision: 1.2<br>
Jun, 2021</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="overview">1. Zimbra Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Zimbra Collaboration is the world’s leading open source messaging and collaboration solution, trusted by more than 5,000 Enterprises, Public Sector organizations and Service Providers, providing mailbox services for hundreds of millions of end users, in over 140 countries.</p>
</div>
<div class="paragraph">
<p>Zimbra includes complete email, contacts, calendar, file-sharing and tasks, and can be accessed from the Zimbra Web client via any device. Featuring the most innovative cross-platform web application today, compatibility with all devices and desktops, Zimbra boosts end-user productivity at dramatically lower costs compared to other legacy solutions. Zimbra provides an open platform designed for virtualization and portability across private and public clouds, making it simpler to manage and more cost effective to scale. Zimbra is the world leader in Open Source based, next-generation messaging and collaboration software.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Zimbra-chat-active.png" alt="Zimbra">
</div>
</div>
<div class="paragraph">
<p>The Zimbra Collaboration architecture is built with well-known open source technologies and standards-based protocols. The architecture consists of client interfaces and server components that can run as a single node configuration or be deployed across multiple servers for high availability and increased scalability.</p>
</div>
<div class="paragraph">
<p>The architecture includes the following core advantages:</p>
</div>
<table class="tableblock frame-all grid-rows stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Core Advantage</th>
<th class="tableblock halign-left valign-top">Components/Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open source integrations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jetty, Postfix, MariaDB, OpenLDAP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Industry-standard open protocols</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP, LMTP, SOAP, XML, IMAP, POP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modern technology Design</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTML5, Javascript, XML, and Java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each Zimbra mailbox server includes its own mailbox accounts and associated
message store and indexes. The Zimbra platform scales vertically (by adding
more system resources) and horizontally (by adding more servers)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Browser-based client interface</p></td>
<td class="tableblock halign-left valign-middle" rowspan="2"><p class="tableblock">Easy, intuitive access to {product-name} features, using a standard
web platform.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Browser-based Administration Console</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_new_features_with_zimbra">1.1. New Features with Zimbra</h3>
<div class="sect3">
<h4 id="_modern_ui">1.1.1. Modern UI</h4>
<div class="paragraph">
<p>Zimbra 9 introduces a modern, responsive user interface based on industry-leading React technology. Users can move seamlessly between desktop, mobile and tablet browsers while enjoying a consistent and easy-to-use email and collaboration experience. And just like you expect, you can customize the UI for your organization’s colors, fonts, logos and more.</p>
</div>
</div>
<div class="sect3">
<h4 id="_3rd_party_integration_extensibility">1.1.2. 3rd Party Integration. Extensibility</h4>
<div class="paragraph">
<p>Zimbra 9 is designed for extensibility and features best-in-class, out-of-the-box integrations with Slack, Dropbox, Google Drive, OneDrive and Zoom, with many more integrations underway. Zimbra is fully committed to creating a collaboration ecosystem that allows small businesses, enterprises and other organizations to utilize services they use day-to-day instead of being forced to use or pay for services they don’t use. Break free from the closed systems of Microsoft and Google and use the apps that you have already invested in.</p>
</div>
</div>
<div class="sect3">
<h4 id="_next_generation_modules">1.1.3. Next Generation Modules</h4>
<div class="paragraph">
<p>NG modules include Real-time Backup, Synchronization of Shared Resources, HSM on Amazon S3 and a new simplified Delegated Admin.</p>
</div>
<div class="sect4">
<h5 id="_realtime_backup_restore">Realtime Backup &amp; Restore</h5>
<div class="paragraph">
<p>Zimbra’s new realtime backup and restore engine backs up every single item and event on your server with split second precision. It’s designed to avoid data loss using atomic and ever-consistent algorithms, while still saving disk space <em>up to 50%</em> thanks to an intelligent deduplication and compression system. It offers six restore features, from a single-item restore to complete disaster recovery. All of the restore modes are transparent to the end-user and are 100% OS, architecture and version independent.</p>
</div>
</div>
<div class="sect4">
<h5 id="_hierarchical_storage_management_hsm">Hierarchical Storage Management (HSM)</h5>
<div class="paragraph">
<p>Featuring advanced Zimbra store management and HSM, you can now manage multiple volumes and HSM policies through your Zimbra Administration Console. Save additional valuable storage space, easily expand your Zimbra server by adding new volumes at will and improve your server performances by splitting the I/O load onto different storage media and use different tiers of storage equipment.</p>
</div>
</div>
<div class="sect4">
<h5 id="_mobile_sync">Mobile Sync</h5>
<div class="paragraph">
<p>What’s new about Zimbra’s mobile sync functionality? Users can now sync their shared Zimbra items along with all of their other Zimbra data. Using Exchange ActiveSync protocol, which is natively supported by the vast majority of mobile devices, your data will always be at your fingertips, without any middleware or dedicated client. With version 8.8.9, there is another new secuity feature added, which is ABQ (Allow, Block, Quaratine)</p>
</div>
</div>
<div class="sect4">
<h5 id="_simplified_delegated_admin">Simplified Delegated Admin</h5>
<div class="paragraph">
<p>In minutes, you can now grant Delegated Admin rights to users, allowing them to perform management tasks such as setting quotas, COS and user limits for your domains. Keep track of your Delegated Admins’ actions and your domain status with new reporting features, straight from your Zimbra Administration Console thanks to the dedicated Administration Zimlet.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_other_features">1.2. Other Features</h3>
<div class="sect3">
<h4 id="_two_factor_authentication">1.2.1. Two-Factor Authentication</h4>
<div class="paragraph">
<p>Zimbra includes now two-factor authentication, making your mailbox more secure by providing a physical layer to produce a successful and secure login.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ssl_sni_for_https">1.2.2. SSL SNI for HTTPS</h4>
<div class="paragraph">
<p>Zimbra SSL SNI allows the server to present multiple certificates on the same IP address and TCP port number, so multiple hostnames can be served over HTTPS from the same IP address.</p>
</div>
</div>
<div class="sect3">
<h4 id="_postscreen_for_zimbra_mta_boosts_email_security">1.2.3. Postscreen for Zimbra MTA boosts Email Security</h4>
<div class="paragraph">
<p>Keeping spambots away, Zimbra Postscreen leaves more SMTP server processes available for legitimate clients, and delays the onset of server overload conditions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_zimbra_collaboration_packaging_system">1.2.4. Zimbra Collaboration Packaging System</h4>
<div class="paragraph">
<p>Apply security patches and Zimbra updates easier than ever before. Simply use your OS update commands, and all of your Zimbra packages will be updated as well. This is still a work in progress and full controls will be available in a future release.</p>
</div>
</div>
<div class="sect3">
<h4 id="_smime_digital_signatures_and_encryption">1.2.5. S/MIME Digital Signatures and Encryption</h4>
<div class="paragraph">
<p>Zimbra (Network Edition) provides cryptographic security services for email: authentication, message integrity, non-repudiation of origin (using digital signatures) and privacy and data security (using encryption). It’s a server-based solution that does not require Java on the client machine. User encrypted certificate and private key are stored on the server, and the server performs all the cryptographic operations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_exchange_web_services">1.2.6. Exchange Web Services</h4>
<div class="paragraph">
<p>If your users are using an enterprise email client like Microsoft Outlook, Zimbra provides Exchange Web Services, which allows your users to connect to their entire mailbox on a Mac. Microsoft Outlook 2011 and Microsoft Outlook 2016 are both supported.</p>
</div>
</div>
<div class="sect3">
<h4 id="_outlook_synchronization_zco">1.2.7. Outlook Synchronization ZCO</h4>
<div class="paragraph">
<p>If some of your users prefer to work with enterprise email client like Microsoft Outlook, Zimbra provides a MAPI Connector which allows your users see their entire mailbox in Microsoft Windows using Microsoft Outlook 2010 and above.</p>
</div>
</div>
<div class="sect3">
<h4 id="_archiving_and_discovery">1.2.8. Archiving and Discovery</h4>
<div class="paragraph">
<p>Zimbra Archiving &amp; Discovery is an optional feature that enables you archive messages that were delivered to or sent by Zimbra and to search across mailboxes. It’s specially designed for legal and audit purposes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reconfigured_imap_service">1.2.9. Reconfigured IMAP Service</h4>
<div class="paragraph">
<p>Zimbra 8.8 has a new refactored IMAP service to run separately from all other Zimbra services. IMAP will no longer affect SLAs! Zimbra 8.8 also has improved SIEVE RFC compliance, offering administrators greater email filtering.</p>
</div>
</div>
<div class="sect3">
<h4 id="_zimbra_connect">1.2.10. Zimbra Connect</h4>
<div class="paragraph">
<p>Zimbra Connect replaces all versions of Chat and Talk. Zimbra Connect is available in Zimbra Network Edition 8.8.x and Zimbra 9.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Zimbra Connect Basic - Peer-to-peer chat using XMPP. Know your company’s chat data is secure and private while your users enjoy searching chat history, emoticons, etc.</p>
</li>
<li>
<p>Zimbra Connect Advanced - brings secure, high-quality chat and videoconferencing right into the Zimbra Web Client. Users can chat and videoconference 1:1 and in groups, share files, share their screen and so much more. Zimbra Connect is licensed on a per-user basis, and is available in Network Edition only.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_zimbra_drive_v2">1.2.11. Zimbra Drive (v2)</h4>
<div class="paragraph">
<p>Zimbra Drive offers an integrated file sync and share functionality built directly into Zimbra. Complete file sharing &amp; storage system right in the Zimbra Web Client. Integrated with Zimbra Docs, Zimbra Drive is an alternative to the <em>Briefcase</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_zimbra_docs">1.2.12. Zimbra Docs</h4>
<div class="paragraph">
<p>Users can now share and collaborate in documents, spreadsheets and presentations realtime within Zimbra. This feature is in the Zimbra Briefcase, and it is an integration with LibreOffice.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_zimbra_multi_tenancy_value_addition">1.3. Zimbra Multi-Tenancy Value Addition</h3>
<div class="paragraph">
<p>Zimbra is a multi-tenant platform that can natively host hundreds or thousands of domains with an array of service offerings. Within the Zimbra platform, a set of common service capabilities is called a "Class of Service" (COS), and COS settings can be used to automate users provisioning requirements and establish service levels. For example, one COS can be targeted at “Basic” users with basic services (Webmail, POP, and SMTP), while another COS can provide “Normal” or “Mobile” services (Zimbra Connector for Outlook, over-the-air ActiveSync for mobile devices, sharing calendaring, Documents, Briefcase, etc.).</p>
</div>
<div class="paragraph">
<p>Zimbra features and preferences can be set in the account profile for individual users or by the Class of Service (COS) for multiple users/groups when accounts are created. These settings can be modified at any time and are easily controlled via the Zimbra Admin interface. When deploying a Zimbra email infrastructure, multiple Class of Services can be defined and users will inherit the functions, features and branding associated with the COS to which they provisioned. When a user is provisioned into a specific COS they will automatic inherit the features and settings as defined in the COS, however it is possible to override COS attributes at a per user account level as part of the provisioning process.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tech">2. Technical Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Zimbra is an innovative messaging and collaboration application that offers
the following state-of-the-art solutions that are accessed through the browser based web client.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Intuitive message management, search, tagging, and sharing.</p>
</li>
<li>
<p>Personal, external, and shared calendar.</p>
</li>
<li>
<p>Personal and shared Address Books and Distribution Lists.</p>
</li>
<li>
<p>Personal and Shared Task lists.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_zimbra_components">2.1. Zimbra Components</h3>
<div class="paragraph">
<p>Zimbra architecture includes open-source integrations using industry standard protocols.
The third-party software listed in <a href="#table_tps">Third-Party Software</a> is bundled with
Zimbra software and installed as part of the installation process. These components have
been tested and configured to work with the software.</p>
</div>
<table id="table_tps" class="tableblock frame-all grid-rows stretch">
<caption class="title">Table 1. Third-Party Software</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">3rd-Party Component</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jetty</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Web application server that runs Zimbra software.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Postfix</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Open source mail transfer agent (MTA) that routes mail messages to the
appropriate Zimbra server</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Open LDAP software</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Open source implementation of the Lightweight Directory Access Protocol
(LDAP) that stores Zimbra system configuration, the Zimbra Global Address
List, and provides user authentication. Zimbra can also work with GAL and
authentication services provided by external LDAP directories such as
Active Directory</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MariaDB</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Database software</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lucene</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Open source full-featured text and search engine</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Third-party source that converts certain attachment file types to HTML</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anti-virus/anti-spam</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Open source components that include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ClamAV, an anti-virus scanner that protects against malicious files</p>
</li>
<li>
<p>SpamAssassin, a mail filter that attempts to identify spam</p>
</li>
<li>
<p>Amavisd-new interfaces between the MTA and one or more content checkers</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache JSieve</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Manages filters for email</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LibreOffice</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>High fidelity document preview</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_zimbra_application_packages">2.2. Zimbra Application Packages</h3>
<div class="paragraph">
<p>{product-name} provides the application packages listed in
<a href="#table_app_pkgs">Application Packages</a>.</p>
</div>
<table id="table_app_pkgs" class="tableblock frame-all grid-rows stretch">
<caption class="title">Table 2. Application Packages</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Package</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Core</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The libraries, utilities, monitoring tools, and basic configuration
files. <code>zmconfigd</code> is contained in the zimbra-core and is automatically
enabled to run on all systems.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Store</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The components for the mailbox server (including Jetty). The Zimbra mailbox
server includes the following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Data store</strong>&#8201;&#8212;&#8201;A MariaDB database.</p>
</li>
<li>
<p><strong>Message store</strong>&#8201;&#8212;&#8201;Location of all email messages and file attachments.</p>
</li>
<li>
<p><strong>Index store</strong>&#8201;&#8212;&#8201;Index and search technology is provided through
Lucene. Index files are maintained for each mailbox.</p>
</li>
<li>
<p><strong>Web application services</strong>&#8201;&#8212;&#8201;The Jetty web application server runs web
applications (webapps) on any store server. It provides one or more web
application services.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra LDAP</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>{product-name} uses the OpenLDAP&#174; software, which is an open source LDAP
directory server. User authentication, the Zimbra Global Address List, and
configuration attributes are services provided through OpenLDAP. Note that
the Zimbra GAL and authentication services can be provided by an external
LDAP Directory such as Active Directory.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra MTA</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Postfix is the open source mail transfer agent (MTA) that receives email
via SMTP and routes each message to the appropriate Zimbra mailbox server
using Local Mail Transfer Protocol (LMTP). The Zimbra MTA also includes the
anti-virus and anti-spam components.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Proxy</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Zimbra Proxy is a high-performance reverse proxy service for passing
IMAP[S]/POP[S]/HTTP[S] client requests to other internal ZCS
services.This package is normally installed on the MTA server(s) or on its
own independent server(s). When the zimbra-proxy package is installed, the
proxy feature is enabled by default. Installing the Zimbra Proxy is highly
recommended, and required if using a separate web application server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Memcached</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Memcached is automatically selected when the zimbra-proxy is installed. At
least one server must run zimbra-memcached when the proxy is in use. You
can use a single memcached server with one or more Zimbra
proxies. zimbra-memcached is required if using a separate web application
server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra SNMP (Optional)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If you choose to install zimbra-SNMP for monitoring, this package should be
installed on every Zimbra server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Logger (Optional)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>If used, this is installed on one mailbox server, and must be installed at
the same time as the mailbox server.The Zimbra Logger installs tools for
syslog aggregation and reporting. If you do not install Logger, the <strong>server
statistics</strong> section of the Administration Console will not display.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Spell (Optional)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Aspell is the open source spell checker used on the Zimbra Web Client. When
Zimbra-Spell is installed, the Zimbra-Apache package is also installed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Apache</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This package is installed automatically when Zimbra Spell or Zimbra
Convertd is installed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Convertd</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>This package is installed on the zimbra-store server. Only one
Zimbra-convertd package needs to be present in the {product-name}
environment. The default is to install one zimbra-convertd on each
zimbra-store server. When Zimbra-Convertd is installed, the Zimbra-Apache
package is also installed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Archiving (Optional)</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Archiving and Discovery offers the ability to store and search all messages
delivered to, or sent by the {product-name} Server. This package includes
the cross mailbox search function which can be used for both live and
archive mailbox searches. Note: Using Archiving and Discovery can trigger
additional mailbox license usage. To find out more about Zimbra Archiving
and Discovery, contact Zimbra sales.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_supported_operating_systems">2.3. Supported Operating Systems</h3>
<div class="paragraph">
<p>Zimbra Collaboration Network Edition v8.8.x, v9.0 and later are supported on the following 64-bit operating systems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Red Hat® Enterprise Linux® 8</p>
</li>
<li>
<p>CentOS Linux® 8 <span class="small red">EOL 12/2021</span></p>
</li>
<li>
<p>Red Hat® Enterprise Linux® 7</p>
</li>
<li>
<p>CentOS Linux® 7</p>
</li>
<li>
<p>Oracle Linux 7.2</p>
</li>
<li>
<p>Ubuntu 16.04 LTS</p>
</li>
<li>
<p>Ubuntu 18.04 LTS</p>
</li>
<li>
<p>Ubuntu 20.04 LTS <span class="small red">coming soon</span></p>
</li>
<li>
<p>Red Hat Enterprise Linux 6 <span class="small red">DEPRECATED</span></p>
</li>
<li>
<p>CentOS Linux 6 <span class="small red">DEPRECATED</span></p>
</li>
<li>
<p>Oracle Linux 6.6 <span class="small red">DEPRECATED</span></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_zimbra_components_overview">2.4. Zimbra Components Overview</h3>
<div class="paragraph">
<p>Zimbra is designed to provide an end-to-end mail solution that is scalable and highly reliable. There are 4 major services in Zimbra described below. You can also have all of the services running on a single virtual server or they can be installed separately on multiple servers. If you have less than 1,000 users, it is very common to have only a single virtual server running all of the Zimbra processes.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/arch_overview.png" alt="Logical Architecture" width="800">
</div>
</div>
<div class="paragraph">
<p>In the Zimbra architecture, you can mix and match these services on a server basis. For example, you may have a server that is running the proxy and MTA services, and you may have another server on the backend running the mailboxd and the LDAP services. You can also have different virtual servers for each environment. For example, you might have a virtual server that is running a proxy, a virtual server that is running the MTA, a virtual server that is running LDAP, and a virtual server that is running the mailbox service.</p>
</div>
<div class="sect3">
<h4 id="_ldap">2.4.1. LDAP</h4>
<div class="paragraph">
<p>This is the heart of the Zimbra architecture based on the open source project OpenLDAP&#174;. Every implementation of Zimbra must have the Zimbra LDAP instance.</p>
</div>
<div class="paragraph">
<p>The LDAP service holds all of the configuration information needed to run the Zimbra environment. There is account information in the LDAP database that includes the username, password, and all other attributes associated with that account, including the mailbox server that the account resides on, the preferences for each user, etc. Zimbra can also integrate with other directories for wider network requirements or external lookups.</p>
</div>
<div class="paragraph">
<p>LDAP also stores the domain information. With each email domain that you create in Zimbra, there is specific configuration information included, such as how does authentication occur for this domain; where does the global address list reside for this domain; and Class of Service information, where you can group users by features.</p>
</div>
<div class="paragraph">
<p>LDAP can also look up email delivery addresses both from internal and external LDAP servers as well. Zimbra supports the proxying of user login and Global Address List (GAL) access to an existing enterprise directory such as Microsoft Active Directory or other LDAP-compliant directories. The ideal configuration seems to be store Zimbra specific configuration data within the Zimbra managed, embedded OpenLDAP and store independent enterprise configuration data within the existing enterprise directory. To provide scalability and redundancy, the Master LDAP server can be horizontally scaled by deploying multiple replica servers or be configured in a multi-master replication mode.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mta">2.4.2. MTA</h4>
<div class="paragraph">
<p>The MTA service is responsible for receiving email from the internet and delivering it to mailboxes in the Zimbra environment. It also delivers email sent by Zimbra users out-bound or to other internal users. It serves in the Zimbra architecture as a relay point for archiving.</p>
</div>
<div class="paragraph">
<p>Internally, Local Mail Transfer Protocol (LMTP) is used to route the emails to the appropriate Zimbra mailbox server. The Zimbra MTA server includes the following programs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Postfix MTA, for mail routing, mail relay, and attachment blocking</p>
</li>
<li>
<p>ClamAV - Anti-Virus engine</p>
</li>
<li>
<p>SpamAssassin - Spam filters</p>
</li>
<li>
<p>Amavis - interface between Postfix and ClamAV/SpamAssassin</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the Zimbra configuration, mail transfer and delivery are distinct functions. Postfix primarily acts as a Mail Transfer Agent (MTA) and the Zimbra mail server acts as a Mail Delivery agent (MDA).</p>
</div>
<div class="paragraph">
<p>Most SME/SMB or larger enterprises will require a 3rd party AS/AV solution that is more enterprise grade or carrier grade. The Zimbra AS/AV is turned off or only some of the features are used. SpamAssassin is an open source project and does not have the fine grained administration features for better control and flexibility.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As the user base grows and domains become popular, the environments is more susceptible to spammers. An enterprise or carrier grade solution becomes mandatory.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_mailboxd">2.4.3. Mailboxd</h4>
<div class="paragraph">
<p>The mailboxd process is where all the hard work is done. It controls everything from presenting the web client to users, so they see their mailbox data, to responding to other mail client requests for POP and IMAP and delivering the mail to those environments. It is responsible for storing messages on disk and providing indexing for those messages. It also maintains the MariaDB database that has the information for calendar, contacts, and tasks.</p>
</div>
<div class="paragraph">
<p>One of the differences post the Zimbra 8.5 architecture is that we split out the mailboxd process. You now have the option of running static content separately from dynamic content. There is a mailboxd user interface node option in addition to the traditional mailboxd process, which includes the message store, the database information, and the indexing information. This is optional. You do not have to split out these two components.</p>
</div>
</div>
<div class="sect3">
<h4 id="_proxy">2.4.4. Proxy</h4>
<div class="paragraph">
<p>The Zimbra Proxy is a high performance POP/IMAP/HTTP proxy server that allows end users to access their Zimbra account using end clients such as Chrome/Firefox/IE/Safari, Microsoft Outlook (Windows and Mac), Mozilla Thunderbird, or other POP/IMAP end client software.</p>
</div>
<div class="paragraph">
<p>Traditionally, we separate what is exposed to the internet and what is behind a firewall. The proxy server and the MTA server traditionally live in what is known as the DMZ or demilitarized zone, which is a security zone that is exposed to the internet. The proxy server listens for requests from the client and then translates across different ports, communicating with the mailboxd servers on the backend. This provides a layer of security on the backend. The proxy service is listening on the traditional protocols of HTTPS, IMAPS, and POP3S, which are secure ports 443, 995, and 993. It translates the incoming requests to different ports: the mailboxd process in not listening on port 443, it is listening on port 8443; it is not listening on port 993, it is listening on 7993; it is not listening on port 995, it is listening on port 7995. This becomes a layer of security, with the proxy service out front and the mailboxd processes separate.</p>
</div>
<div class="paragraph">
<p>Proxying allows users to enter <em>imap.example.com</em> as their IMAP server, rather than remembering the actual mailbox server the user has been provisioned on. Encapsulation provides a layer of security and the proxy does a lookup to determine which backend mailbox server a user’s mailbox lives on and transparently proxies the connection from user’s client to the correct mailbox server.</p>
</div>
<div class="paragraph">
<p>In addition to IMAP/POP3 proxying, the Zimbra proxy package based on NGINX is also able to reverse proxy HTTP requests to the right backend server. Using an Nginx based reverse proxy for HTTP helps to hide names of backend mailbox servers from end users. For example, users can always use their web browser to visit the proxy server at <a href="https://mail.example.com" class="bare">https://mail.example.com</a>. The connection from users’ whose mailboxes live on mbs1.example.com is proxied to mbs1.example.com by the proxy running on the mail.example.com server. Clients such as REST and CalDAV clients, Zimbra Connector for Outlook, and Zimbra Mobile Sync devices are all supported by the Zimbra Proxy.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_client_access">2.5. Client Access</h3>
<div class="paragraph">
<p>Zimbra features compatibility with Microsoft Outlook (both Windows and Mac), Apple Desktop applications, and all other standards based POP/IMAP/iCal/CalDAV/CardDAV clients. Our broad desktop compatibility gives end-users freedom of choice and administrators the ability to protect their desktop investments because mixed PC, Mac, and Linux desktop deployments can all talk to the same Zimbra Server. The <a href="#flow_arch">mail flow</a> diagram below shows some of the more common methods of access and indicates the protocols used to interact with the Zimbra Mailstore.</p>
</div>
<div class="paragraph">
<p>The Zimbra Connector for Outlook (ZCO) provides real time two-way synchronization of mail, contacts, tasks, and calendar between Outlook and the ZCS server. Outlook for Mac works similarly using the EWS (Exchange Web Services) interface with the ZCS server. Standards-Based clients such as Mozilla Thunderbird, Sunbird, and Eudora can be used with Zimbra to access email and even calendar data because the Zimbra Server uses an all standards-based approach and supports POP, IMAP, iCal, CalDAV, RSS, etc.</p>
</div>
<div id="flow_arch" class="imageblock">
<div class="content">
<img src="images/mail_flow.jpg" alt="Mail Flow" width="800">
</div>
</div>
<div class="sect3">
<h4 id="_mobile_access">2.5.1. Mobile Access</h4>
<div class="paragraph">
<p>Zimbra Mobile for smartphones enables two-way, over-the-air synchronization of mail, contacts, calendar and tasks data between the mobile device and the Zimbra Server. It features push email, which sends messages in real time to your device when it arrives on the Zimbra Server. Supported devices must be ActiveSync compatible, for example Apple iPhones, Android smartphones from Samsung, HTC, etc.</p>
</div>
<div class="paragraph">
<p>Zimbra’s mobile access is further enhanced via its Mobile Web Client.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mobile Web Browsers - All devices with HTML capable browsers, have real time access to the Zimbra Server using our Mobile Web Client. Zimbra’s Mobile Web Client allows users access to their email, contacts, and calendar. This provides on-the-go access to the Zimbra experience to virtually all end-users.</p>
</li>
<li>
<p>Responsive Design – Zimbra web client adapts itself to the device being used. Tablets have a new layout based on the Sencha framework and the smaller mobile browsers use an xHTML format.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mail_flowin_a_multi_server_configuration">2.5.2. Mail Flow in a Multi-Server Configuration</h4>
<div class="paragraph">
<p>The configuration for each deployment is dependent on numerous variables such as the number of mailboxes, mailbox quotas, performance requirements, existing network infrastructure, IT policies, security methodologies, spam filtering requirements, and more. In general, deployments share common characteristics for incoming traffic and user connectivity, as depicted in the following diagram. Alternate methods for configuring numerous points within the network are also possible.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/mailflow.png" alt="Mail Flow" width="800">
</div>
</div>
<div class="paragraph">
<p>The</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Inbound Internet mail goes through a firewall and load balancing to the edge MTA for spam filtering.</p>
</li>
<li>
<p>The filtered mail then goes through a second load balancer.</p>
</li>
<li>
<p>An external user connecting to the messaging server also goes through a firewall to the second load balancer.</p>
</li>
<li>
<p>The inbound Internet mail goes to any of the Zimbra Collaboration MTA servers and goes through spam and virus filtering.</p>
</li>
<li>
<p>The designated Zimbra Collaboration MTA server looks up the addressee’s directory information from the Zimbra Collaboration LDAP replica server.</p>
</li>
<li>
<p>After obtaining the user’s information from the Zimbra Collaboration LDPA server, the MTA server sends the mail to the appropriate Zimbra Collaboration server.</p>
</li>
<li>
<p>Internal end-user connections are made directly to any Zimbra Collaboration server that then obtains the user’s directory information from Zimbra Collaboration LDAP and redirects the user, as needed.</p>
</li>
<li>
<p>The backups from the Zimbra Collaboration servers can be processed to a mounted disk.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="architecture">3. Zimbra Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This diagram represents the Zimbra architecture.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ports_arch.png" alt="Client Server Flow Architecture">
</div>
</div>
<div class="paragraph">
<p>The mailbox server is running Jetty, the Java Virtual Machine, and this is the service node for the mailboxd architecture. On the backend, it is handling everything from storing the messages on disk to all of the other functions shown.</p>
</div>
<div class="paragraph">
<p>Zimbra was built around SOAP requests: the browser clients issue a SOAP request to the mailboxd process to retrieve information and that information is delivered back to the browser client.</p>
</div>
<div class="sect2">
<h3 id="_message_and_file_store">3.1. Message and File Store</h3>
<div class="paragraph">
<p>Zimbra stores messages on disk. Messages are stored in the <strong>RFC 822</strong> format. If you have access as a system administrator, you can go to /opt/zimbra/store directory and drill down to look at the actual messages stored in MIME format on disk. A benefit of this storage architecture is that LINUX does single-instance storage: if I send a message to 3 different people, and we all share the same mailbox server, then there is only one instance of that mail item in the store. LINUX maintains multiple points to that mail item.</p>
</div>
<div class="paragraph">
<p>The data store is a MySQL database where internal mailbox IDs are linked with user accounts. The data store maps the mailbox IDs to users’ OpenLDAP accounts. This database contains each user’s set of tag definitions, folders, calendar schedules and contacts, as well as the status of each mail message - read, unread, tags associated to message, and folder the message resides in. Index and search technology is provided through Lucene and index files are maintained for each individual mailbox.</p>
</div>
<div class="paragraph">
<p>The other enhancement in the Zimbra 8 series is that the storage system can be a different type of file system, such as a global file system like Scality or EMC. Many Zimbra customers implement Zimbra over object store, so the message blobs are stored on a global array across multiple spindles and multiple pieces of hardware. It provides more redundancy and availability for the message store.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/store_link.png" alt="Message Store Directory Layout" width="500">
</div>
</div>
<div class="paragraph">
<p>The Zimbra message (or blob) store is built on the underlying Unix/Linux file system. The mapping is one file per message, we actually write the RFC822 MIME message representation directly to a file. This has a number of benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Once written, messages are immutable in Zimbra, and file systems are very efficient at storing and retrieving immutable unstructured/semi-structured blocks of data.</p>
</li>
<li>
<p>Garbage collection is provided natively by the operating system, which offers both greater efficiency and lower administrative overhead.</p>
</li>
<li>
<p>Independent utilities, tools, and scripts can easily recognize and process the Zimbra message representation on disk.</p>
</li>
<li>
<p>Native operating system capabilities such as indexing/search (e.g., Mac Spotlight), compression, and security.</p>
</li>
<li>
<p>Multi-level caching. Zimbra caches data itself, but Zimbra also benefits from the underlying operating system caching. Since enterprise messaging systems are generally gated on read and write performance, effective caching is one of the critical foundations of a scalable messaging implementation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each instance of the Zimbra mailbox server (one instance per machine), we store one copy of each message including all its attachments, even if that message is destined for multiple mailboxes. This obviously can lead to substantial savings in disk if large attachments are often sent to multiple recipients on a server (some messaging servers only provide single copy per mailbox or single copy per storage group, which can lead to significant redundancy in more expensive managed storage with no improvement in availability/fault tolerance). For operating systems that support them, we utilize hard links to the single copy to efficiently ensure that a file is garbage collected after all users have deleted it from their mailbox metadata.</p>
</div>
</div>
<div class="sect2">
<h3 id="_metadata_sql_store">3.2. Metadata SQL Store</h3>
<div class="paragraph">
<p>While messages themselves are immutable, the meta-data associated with a message goes through frequent state changes as it is used. Message meta-data includes such items as</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What folder is the message in?</p>
</li>
<li>
<p>What tags does the message have?</p>
</li>
<li>
<p>Is the message read or unread?</p>
</li>
<li>
<p>What conversation is the message part of?</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We are storing the header information of every message. When you go into the web client and open your mailbox, you see the header information (who the message is from, when it was received, etc.). That is all meta data stored in the MariaDB database. When you click on the message to display it, Zimbra reads the message from the storage system.</p>
</div>
<div class="paragraph">
<p>Zimbra includes this MariaDB database for managing mailbox meta-data, and it is shipped within each Zimbra distribution. We choose to use a relational database for Zimbra meta-data because:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We sought to leverage the hardening and performance investment of smart engineers before us. For efficient searching and reliably updating highly structured meta-data, it is hard to beat relational databases.</p>
</li>
<li>
<p>Caching - Unlike immutable messages, Zimbra’s meta-data is both frequently read and written. Relational databases provide very efficient caching for both reads and writes. Update caching efficiency comes out of combining multiple updates, even those spanning transactions, into a single disk write (this optimization, of course, leverages the database’s sequentially-written transaction log to ensure that no changes are lost in the event of an outage).</p>
</li>
<li>
<p>The SQL interface provides the Zimbra Community with investment protection in that the ZCS mailbox server could be very easily ported to other relational databases from the MySQL implementation that is currently included in ZCS.</p>
</li>
<li>
<p>Database Reliability: Every transaction that occurs in Zimbra is stored in the Zimbra redo log. That includes everything from receiving a message in your inbox, reading that message, moving that message to another folder, deleting the message, adding a calendar appointment, adding a new address book, etc. All of these things are transactions, and all transactions are stored in the Zimbra redo log, which is handled by the mailboxd process.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_search">3.3. Search</h3>
<div class="paragraph">
<p>When a message comes into Zimbra, that message is indexed with the Lucene indexing process. This provides the basis for the very fast search in Zimbra, including the ability to search across multiple criteria.</p>
</div>
<div class="paragraph">
<p>Search is fundamental to the Zimbra. Zimbra users do need to rely on complicated folder hierarchies to organize their emails because Zimbra users can search almost anything instantaneously across any folders. This enables usability advantages as users can archive emails into a single folder. All the meta-data associated with a message (folder, read/unread, tags, etc.) is available as search criteria, as are indexes into the content of the messages and the content of any attachments to the messages. Zimbra provides a simple, yet rich grammar for specifying searches, and then offers a graphical search builder for constructing advanced searches without having to learn that grammar.</p>
</div>
<div class="paragraph">
<p>Zimbra search is conducted on the server side. The advantages of server-side search are access to full mailboxes (including
archived content), reliance on faster disk/CPU for increased performance (even factoring in the network latency), and the elimination of a substantial amount of redundant computation associated with indexing attachments sent to multiple recipients.</p>
</div>
<div class="paragraph">
<p>Zimbra leverages Apache Lucene to manage the index that enables fast searching, and Zimbra uses third-party software from Verity to extract text from attachments for indexing within Lucene.</p>
</div>
</div>
<div class="sect2">
<h3 id="_lucene_index">3.4. Lucene Index</h3>
<div class="paragraph">
<p>Lucene is a high-performance, full-text search engine from Apache.  Lucene works by generating a full “segment” index for all words/tokens in a particular message, and optionally, its attachments. This segment is then merged into the receiving users’ existing index (one index per user). The index itself is represented in flat files. Search simply traverses these optimized file structures, often in parallel.</p>
</div>
<div class="paragraph">
<p>Search is very fast—users perceive it to be nearly instantaneous. The pre-processing required to construct an index, on the other hand, grows linearly with the size of the text. Attachments tend to be the overriding factor in this overhead. Attachment indexing is a function of user’s class of service, and so can be turned on or off based on server scaling requirements. Message text indexing is more essential to the user experience (as well as significantly lower-overhead due to the smaller datasets)—it is a big part of the reason why many Zimbra users become comfortable with dropping their complex, time-intensive folder hierarchies in favor of a single “Stash” folder, because powerful search frees them from the worry that they will not be able to find what they are looking for.</p>
</div>
<div class="paragraph">
<p>We have found this Lucene index to typically be about 20% of the size of the text being indexed. Simply by compressing messages and their attachments prior to storage, we can make up the space required to store the Lucene index. As a user’s index grows larger, the savings increase, since there is greater reuse of tokens. Garbage collection is done on the indices only after expunging messages (emptying the trash), so that trashed messages can still be found (many Zimbra users choose to use their trash as a secondary archive folder, since no message data need be expunged from the trash until the user’s quota is reached). Should a more catastrophic failure lead to an index corruption; there is also an administrative interface for regenerating Lucene indices (which are, of course, idempotent).</p>
</div>
</div>
<div class="sect2">
<h3 id="_other_services_and_access_methods">3.5. Other Services and Access Methods</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Attachment Index &amp; View</strong>: With the Zimbra Network Edition, and you have attachment indexing and view capabilities turned on, and that process is being provided by the mailboxd process. Convertd is the pricess wiht the attachment index and viewing capability. If I send you an email with a PowerPoint presentation, the Autonomy Keyview process adds the attachment to your search index, so you can perform an email search that also searches the attachment.</p>
</li>
<li>
<p><strong>Free/Busy Providers</strong>: The last process that is being handled by the mailboxd process is the integration with free/busy providers. If you are migrating from MIcrosoft Exchange to the Zimbra platform, and you have some users on the legacy system and others on the new Zimbra system, and you want them to be able to update calendar information in both directions, that service would be provided by the free/busy provider within the mailboxd architecture.</p>
</li>
<li>
<p><strong>Lite Browser Clients</strong>: It is possible to use Zimbra in HTML mode, where the information is displayed in HTML. The AJAX client, built on the AJAX framework, provides drag-and-drop functionality and other things that users are accustomed to in the browser.</p>
</li>
<li>
<p><strong>Desktop Clients</strong>: We have the Zimbra Desktop. We also have Microsoft Outlook, which connects to the Zimbra environment over POP or IMAP. You can also install the Zimbra Connector for Outlook. This is part of the Network Edition of Zimbra. The Zimbra Connector for Outlook provides the integrated functionality of calendar, contacts, and tasks from within Outlook, which makes Outlook think that it is talking to an Exchange server. When Outlook communicates with an Exchange server, it is using the MAPI protocol. The MAPI protocol is a Microsoft API. Zimbra does not listen on that API, so we have to translate those requests from MAPI commands to SOAP commands over HTTPS.<br></p>
<div class="paragraph">
<p>We also have the ability for other clients like Thunderbird, the Apple mail client, or the Apple calendar to communicate with the Zimbra mailboxd process. We can do this over CardDAV or CalDAV or POP or IMAP.</p>
</div>
</li>
<li>
<p>Zimlets: Zimbra provides the ability to extend the web browser interface to integrate services from external web service providers. One Zimlet example is the Yahoo Finance Zimlet, which you can use to present a stock ticker in Zimbra that updates every 20 minutes. That information is coming from an external web service. From a security stand point, it is not recommended to present information in a client from across domains. The mailboxd process has something called the Zimlet web service proxy. When the browser running the Zimlet needs to update stock quotes, the request is made to the mailboxd process, the mailboxd process goes to the Internet and pulls that information from the external web service, and then delivers it back to the browser client. You can extend this to any external web service. If you are a manufacturing organization and you need to see order information displayed in email clients dynamically, you can write a Zimlet that goes out and pulls that information from your ordering management system and presents the information in the browser client without the user having to log into a separate system.<br></p>
<div class="paragraph">
<p>We also have the ability to create Zimlet JSP tags that communicate information back to the browser via the mailboxd interface.
The other point to make is that when users of the desktop clients and browser clients send email, they connect to the mailbox server, they compose email in the client, and then they click send. The mailboxd process forwards that information to the postfix MTA service where antispam and antivirus is performed, and then it is forwarded to the endpoint.</p>
</div>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="HA">4. High Availability and Scalability</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_high_availability">4.1. High Availability</h3>
<div class="paragraph">
<p>Single points of failure should be avoided wherever possible, at all levels: network, server, power supply, cabling, disk drives and software elements.  This should apply to ancillary systems (e.g. DNS and External Authentication Servers) as well as to the email servers themselves.</p>
</div>
<div class="sect3">
<h4 id="_ldap_master">4.1.1. LDAP Master</h4>
<div class="paragraph">
<p>The LDAP Master will have its database stored on the servers’ local disks. Redundancy is provided via the deployment of LDAP Replica servers. The replicas contain a full copy the master database and in the event of failure of the master server the replica can be promoted to master status and the service can continue. Adding replicas also facilitates the distribution of load on the LDAP services; balancing the load across the master and replicas is configured internally within the ZCS configuration. Zimbra also supports a Multi-Master mode where there can be more than one master LDAP server eliminating the need for replica servers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mailstore">4.1.2. Mailstore</h4>
<div class="paragraph">
<p>Zimbra is designed to be deployed in a virtual environment. VMware, KVM are the popular VI environments supported. Zimbra works best with VMware vSphere and can leverage vSphere HA for the mailstore high-availability. Active-Active configuration is not supported today. Zimbra can also work with traditional OS clustering (RedHat) but there is no application level failover supported and this works best for a hardware failure.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mta_and_proxy">4.1.3. MTA and Proxy</h4>
<div class="paragraph">
<p>Both the MTA and Proxy servers are stateless services and can run in an Active-Active mode behind a load-balancer.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scalability">4.2. Scalability</h3>
<div class="paragraph">
<p>Zimbra was designed from the ground up to scale to meet the needs of businesses with 100,000s of users and Service Providers with millions and even tens of millions of users. The Zimbra architecture inherits from distributed systems expertise that was gleaned building messaging systems that today host more than 100 million mailboxes world-wide and Java/Web systems that have thousands of production server CPUs within single large-scale deployments.</p>
</div>
<div class="paragraph">
<p>All medium and large Zimbra deployments are horizontally partitioned across servers (and the attached storage) by end-user mailboxes. An end-user&#8217;s mailbox includes his or her messages, calendar(s), address book(s), documents, and so on, which are all collocated for very efficient context switching and search across applications. So ZCS servers are inherently stateful - each serves as the primary home for a subset of the aggregate mailboxes. This requires that each ZCS server have the smarts to reroute a protocol request (via XML/SOAP/HTTP/S, IMAP/S, POP/S, RSS, iCal, etc.) to the appropriate primary server in the event that an in-bound load balancer makes the wrong decision.</p>
</div>
<div class="paragraph">
<p>Automated replication and failover is also essential for large-scale deployments. For example, LDAP configuration data (which includes end-user mailbox home locations) can be fully replicated/partitioned across as many replica servers as are required to meet performance and availability requirements. LDAP replicas may be collocated with ZCS mailbox servers, MTAs, or “vertically partitioned” to dedicated servers.</p>
</div>
<div class="paragraph">
<p>Mailbox data, on the other hand, can be transparently replicated within the underlying storage system (such as by using RAID or mirroring) for availability only. (It simply does not make sense to replicate mailboxes for scalability, given how frequently state data is updated, and the overhead of ensuring transactional consistency between multiple mailbox copies.) Clustering technology is used to automatically failover from the primary server to a preconfigured secondary (or tertiary) server, which then assumes the role of primary for that mailbox. (I/O fencing and associated technologies ensure that the former primary no longer has “write” access to the mailbox in order to avoid “split-brained syndrome”).</p>
</div>
<div class="paragraph">
<p>ZCS Meta-data optimization &amp; partitioning; Meta-data for a mailbox is generally all of the data required for navigating to the appropriate message or meeting. Zimbra meta-data includes ZCS&#8217;s very efficient, Lucene based index into all the text contained in every message, meeting, contact, document, attachment, and so on. Zimbra meta-data also includes the structured meta-data that captures folders, tags, dates, read/unread status, etc. Zimbra uses an off-the-shelf SQL database for optimizing structured meta-data queries and updates.</p>
</div>
<div class="paragraph">
<p>Meta-data is horizontally partitioned by user into the appropriate ZCS mailbox server, but the key additional insight is that this meta-data can also be partitioned from the target data (message body, meeting, document) to ensure very efficient search, UI painting, and so on. Separating the meta-data and target-data makes it far more cost-effective to keep the meta-data on fast disk, allowing sophisticated search and navigation to be nearly instantaneous even across multi-gigabyte mailboxes. Latency in access to the message body itself (which could, for example, reside in an HSM system) is not nearly as problematic to the user experience as latency or inefficiency in accessing the meta-data. Partitioned meta-data also allows potentially expensive operations such as compliance-related cross-mailbox discovery to be handled efficiently (via simply composing the appropriate horizontally partitioned search results).</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="approach">5. Proposed Project Approach</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section details how Zimbra professional services handle a project to ensure a smooth transition from the existing legacy platform to full Zimbra Collaboration Suite. This section serves as a guideline only and the approach needs to be modified and made suitable as per the customers requirements. Here are some of the processes and phases mentioned.</p>
</div>
<div class="sect2">
<h3 id="_assessment_and_solution_design">5.1. Assessment and Solution Design</h3>
<div class="paragraph">
<p>Site assessment and auditing means identifying the current infrastructure and business goals of the customer. This includes getting information about the current platform topology like hardware/storage/network capabilities, service SLA&#8217;s, getting information on the current issues, etc.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Review the current environment and examine all the business and technical issues.</p>
<div class="ulist">
<ul>
<li>
<p>Get more information on the server, storage and network infrastructure</p>
</li>
</ul>
</div>
</li>
<li>
<p>Formulate problem definitions and document the objectives.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Solution design and service planning will include development of the Baseline Architecture, Low-Level Design (“LLD”), hardware Bill-of-Materials (“BOM”) and development of customizations and documentation for all of the above.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Develop an understanding of the customer’s existing architecture and technical challenges or issues.</p>
</li>
<li>
<p>Document the project requirements, phases and communication plans with the customer’s product and technical staff</p>
</li>
<li>
<p>Create a project definition including roles, dependencies, schedule estimates, communication plans, etc.</p>
</li>
<li>
<p>Create an integrated application architecture that is both flexible and scalable.</p>
</li>
<li>
<p>Present a solution design methodology that is agile.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_zimbra_deployment_and_configuration">5.2. Zimbra Deployment and Configuration</h3>
<div class="paragraph">
<p>This phase will involve the actual deployment of all the different Zimbra components like LDAP, MTA, Mailbox services based on solution design.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Execute the project according to the documented and approved requirements and specifications.</p>
</li>
<li>
<p>After installation, configure the platform as per the design</p>
</li>
<li>
<p>Integrate with existing gateway services, anti-spam, antivirus and other 3rd party dependencies etc.</p>
</li>
<li>
<p>Configuration of the dependencies and the Zimbra platform as per the requirements</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A good resource for deployment can be found here - <a href="https://wiki.zimbra.com/wiki/Performance_Tuning_Guidelines_for_Large_Deployments">Performance Tuning</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_testing">5.3. Testing</h3>
<div class="paragraph">
<p>Based on the requirements, a functional test case document needs to be ready for this phase. An UAT or functional testing ensures that there are no bugs/issues with the platform for regular day-to-day use and the customer has all their challenges addressed before the environment is made production ready. Testing may include the use of in-house or third party tools and the level of testing always depends on the customer requirements.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Perform testing and quality assurance via functional, performance, and end-to-end testing.</p>
</li>
<li>
<p>Manage or assist with any pilot/user acceptance testing.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_migration">5.4. Migration</h3>
<div class="paragraph">
<p>Migration is most critical part of any mail service.  Once all the required functional testing has been performed, its time to migrate the data from old legacy platform to Zimbra platform.</p>
</div>
<div class="paragraph">
<p>Zimbra professional services can help with the design, planning, scripting, and/or testing of migration of all legacy data ( email, calendars, contacts, filters, etc) to the new Zimbra platform. Zimbra services can help design the best-suited migration approach for the customer based on inputs on the current setup and migration plans and also help develop the migration methods based on the migration plan, which may include migration via all-at-once/big-bang or incremental, split-domain methods. Zimbra services will also develop the necessary scripts to carry out migration and run the tools for a subset of users. Customer will run remaining subset when they gain enough knowledge and understanding.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Zimbra Professional Services is not a bundled offering and is a separate paid service offering.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_audit_and_operations">5.5. Audit and Operations</h3>
<div class="paragraph">
<p>The goal of this phase is to deliver an operational support model that will streamline production operations, provide proactive issue detection, and provide overall service excellence. Once the environment is live, there must be a process of regular auditing of the environment and its configurations to ensure that the system has been tuned for optimum performance. All fo the Zimbra statistical information is collected by the "stat" process and logged. This data can be analyzed further and decisions can be made on how to improve the system performance.</p>
</div>
<div class="paragraph">
<p>Refer to this <a href="https://wiki.zimbra.com/wiki/ZCS_Operational_Best_Practices_-_Scope">ZCS Best Practices reference guide</a> for more information.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="zimbra_ports">Appendix A: ZCS Firewall Ports</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_inside_firewall_ports">A.1. Inside Firewall Ports</h3>
<table class="tableblock frame-all grid-rows stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSH for Remote Server logs/Management</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP to MTA from internal AS/AV service</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">389</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MTA to LDAP Authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">514</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(r)syslogd from ZCS servers to Logger (TCP/UDP)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7025</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LMTP from MTA&#8217;s to Mailbox Servers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7071</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Administration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7072</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Route Lookups</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7110</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pop Proxy to Mailbox Servers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7143</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMAP Proxy to Mailbox Servers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7993</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMAP Proxy to Mailbox Servers (SSL)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7995</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POP Proxy to Mailbox Servers (SSL)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8080</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy to Mailbox Server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy to Mailbox Server if using SSL at Proxy</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mailbox Server to Zimbra Docs (both ways for HTTPS backend)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9091</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">incoming traffic from all mailbox and proxy servers to Docs Server Extension</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9071</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zimbra Administration if using Admin Web Interface through Proxy</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_outside_firewall_ports">A.2. Outside Firewall Ports</h3>
<table class="tableblock frame-all grid-rows stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Port</th>
<th class="tableblock halign-left valign-top">Function</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP to Internal AS/AV from external mail servers</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connect to Zimbra Mail (if SSL offloaded by Load Balancer)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">110</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POP to Proxy server (if SSL offloaded)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">143</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMAP to Proxy Server (if SSL offloaded)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">465</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTPS to Internal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">587</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Submission Email using TLS over SMTP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">443</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connect to Zimbra Mail over HTTPS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">993</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IMAP SSL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">995</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POP SSL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5222</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">XMPP (TLS) - Direct to Mailbox required</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="TALK">Appendix B: Zimbra Connect</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Zimbra Connect is chat and more, right in your Zimbra Web Client. Zimbra Connect integrates a fully fledged corporate instant messaging platform inside the Zimbra WebClient, including Group and Corporate Messaging, File Sharing, Screen Sharing and informal Video Chat capabilities.</p>
</div>
<div class="paragraph">
<p>Zextras Team includes the following front-end features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Message delivery and read awareness</p>
</li>
<li>
<p>1-to-1 Instant Messaging</p>
</li>
<li>
<p>Group Messaging</p>
</li>
<li>
<p>Corporate Messaging (Spaces and Channels)</p>
</li>
<li>
<p>Group Video Calls</p>
</li>
<li>
<p>Channel Video calls</p>
</li>
<li>
<p>File Sharing</p>
</li>
<li>
<p>Screen Sharing</p>
</li>
<li>
<p>Emojis</p>
</li>
<li>
<p>Mute conversations</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>includes the following backend features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>COS and User availability</p>
</li>
<li>
<p>Built-in TURN server compatibility</p>
</li>
<li>
<p>No core installation needed. Zimlet installation through a package manager.</p>
</li>
<li>
<p>No configuration needed</p>
</li>
<li>
<p>Peer-to-Peer WebRTC protocol to avoid server load</p>
</li>
<li>
<p>Dedicated audit log</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Beginning in Zimbra Collaboration Network Edition 8.8.8, the Zimbra Connect Zimlet will provide the basic 1:1 chat features only. In order to enable the advanced chat and videoconferencing features per user, a purcharse of Zimbra Connect license is needed.</p>
</div>
<div class="paragraph">
<p>Zimbra Connect has two user interfaces: <strong>Chat Panel and Zimbra Connect tab</strong>.</p>
</div>
<div class="paragraph">
<p>The <strong>Chat Panel</strong> is available to all users - basic and advanced - for text messaging. Advanced users will have the additional options of videoconferencing and file sharing in the panel.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/panel_chat.png" alt="Chat Panel" width="600">
</div>
</div>
<div class="paragraph">
<p>The <strong>Zimbra Connect</strong> tab is only available for advanced Zimbra Connect users. This tab offers all of the corporate instant messaging features such as Spaces and Channels.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/talk_tab.png" alt="Chat Panel" width="600">
</div>
</div>
<div class="paragraph">
<p>Advanced Zimbra Connect users will have three options to interact with other users: Groups, Spaces, and Channel.</p>
</div>
<div class="paragraph">
<p><strong>Groups</strong></p>
</div>
<div class="paragraph">
<p>Groups are the basic way of communicating with multiple people at the same time (up to 5 total). Those are non-persistent entities that are not tied to any specific space: any user can create a group inviting people from their Buddy List and any group member can invite more people in the same way. When all users leave a group, the group itself ceases to exist.</p>
</div>
<div class="paragraph">
<p><strong>Groups Features</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>A user in a Group can add more users to the Group itself up to the allowed limit</p>
</li>
<li>
<p>A user in a Group can chat with all of the others. Messages sent in a Group are viewed by all members of that Group</p>
</li>
<li>
<p>A user in a Group can send files to all of the others. Files sent in a Group are available to all members of that Group</p>
</li>
<li>
<p>A user in a Group can start a videoconference with all of the others. Group videoconferences can be joined at any time by all members of the Group</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Spaces</strong></p>
</div>
<div class="paragraph">
<p>Spaces are a themed container that can hold any number of Channels. A Space is a community portal where people gather to discuss different topics in dedicated areas (named Channels).</p>
</div>
<div class="paragraph">
<p><strong>Spaces Features</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Each space has a unique name and topic. The name cannot be changed after creating the space but the Topic can be edited</p>
</li>
<li>
<p>Users in a space can send an email to all members of that space</p>
</li>
<li>
<p>Members can leave a space at any time</p>
</li>
<li>
<p>Members can create new channels and invite new people to the space</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Channels</strong></p>
</div>
<div class="paragraph">
<p>Channels are topic-defined areas inside of a same space. Those can contain any number of users, and unlike groups, users are able to autonomously join any Channel in a Space they are in instead of being invited to it by a member.</p>
</div>
<div class="paragraph">
<p><strong>Channels Features</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>A user in a Channel can chat with all of the others</p>
</li>
<li>
<p>A user in a Channel can send files to all of the others</p>
</li>
<li>
<p>A user in a Channel can start a videoconference with all of the others</p>
</li>
<li>
<p>Channel videoconferences can be joined at any time by all members of the Channel</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Videoconferencing</strong></p>
</div>
<div class="paragraph">
<p>Videoconferencing features are available in both Groups and Channels, allowing multiple people to communicate in real-time using a webcam and a headset as well as allowing them to share their screen with all other attendees.</p>
</div>
<div class="paragraph">
<p>This feature is based on the WebRTC protocol, a peer-to-peer auto-adaptive technology that allows clients to communicate directly without overloading the server and whose call quality is automatically tweaked based on the available bandwidth - with the maximum quality being Full HD for both video and audio. The first time a Videoconference is started, users will need to grant their browser access permissions to their camera and microphone.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/videoconference.png" alt="Videoconferencing" width="800">
</div>
</div>
<div class="paragraph">
<p><strong>Video Server</strong></p>
</div>
<div class="paragraph">
<p>Video Server is a WebRTC stream aggregator that improves Connect&#8217;ss performance by merging and decoding/re-encoding all streams in a meeting. While the default WebRTC creates one incoming and one outgoing stream per meeting participant, with the Connect Video Server, each client will only have one aggregated inbound stream and one aggregated outbound stream. This applies for both video and audio.</p>
</div>
<div class="paragraph">
<p>Consider a meetings with 5 people &#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Without Video Server: each client generates 4x outgoing video/audio streams and receives 4 incoming video/audio streams</p>
</li>
<li>
<p>With Video Server: each client generates 1 outgoing video/audio stream and receives 1 incoming video/audio stream</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Video Server uses conservative Codecs (VP8 and Opus) to ensure the broadest compatibility, but more codecs can be enabled. It also splits the Webcam and Screen Sharing streams and reserves the same bandwidth for both.</p>
</div>
<div class="paragraph">
<p>A properly set up Video Server will supersede the need of a TURN server, provided that all clients can reach the Video Server’s public IP and that UDP traffic is not filtered.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="zimbra_docs">Appendix C: Zimbra Docs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Zimbra Docs is based on a heavily customized LibreOffice online package allowing for collaborative editing of documents, spreadsheets and presentations straight from the Zimbra WebClient.</p>
</div>
<div class="sect2">
<h3 id="_components">C.1. Components</h3>
<div class="sect3">
<h4 id="_zimbra_docs_server">C.1.1. Zimbra Docs Server</h4>
<div class="paragraph">
<p>The Zimbra Docs server is the heart of the service. The service hosts each document opened through a LibreOffice engine and responds to the client via an image upon every keystroke and change in the document.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This component must be installed on one or more dedicated nodes running Ubuntu 16.04 LTS.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_zimbra_docs_extension">C.1.2. Zimbra Docs Extension</h4>
<div class="paragraph">
<p>The extension is the key component which coordinates everything. Its main tasks are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select which Docs server the next document will be opened on.</p>
</li>
<li>
<p>Redirect the client when it needs to open a document.</p>
</li>
<li>
<p>Read and write documents to and from system storage on behalf of the Docs server.</p>
</li>
<li>
<p>Connect to each Docs server via an administrative websocket and keep track of the availability and the resource usage of each.</p>
</li>
<li>
<p>Orchestrate concurrent user connections to the same document in the same server. (document sharing)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Zimbra Docs Extension is contained within the NG modules package together with the NG Core.</p>
</div>
</div>
<div class="sect3">
<h4 id="_zimbra_docs_zimlet">C.1.3. Zimbra Docs Zimlet</h4>
<div class="paragraph">
<p>A Zimbra Docs Zimlet handles the integration with briefcase and with email attachments. It is a thin web client which connects to a native server instance via websocket, renders a document and only sends changes to the client in order to keep the fidelity of the document on par with a desktop client while at the same time reducing the bandwidth to the bare minimum.</p>
</div>
<div class="paragraph">
<p>Documents in preview and attachments are shown in read-only mode with a simplified interface, while edit mode has a full interface.</p>
</div>
<div class="paragraph">
<p>Its main tasks are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Change the "create" button in the ZWC to the related Docs feature.</p>
</li>
<li>
<p>Change the preview feature to use Docs.</p>
</li>
<li>
<p>Allow the preview of documents.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_document_management_flow">C.2. Document Management Flow</h3>
<div class="paragraph">
<p>This is what happens "behind the scenes" when a user creates a new document:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The Zimlet prompts the Extension to create a new empty document</p>
</li>
<li>
<p>The Extension creates the document and returns the document&#8217;s ID to the client</p>
</li>
<li>
<p>The Zimlet opens a new Zimbra tab containing an iframe pointing towards '/service/extension/wopi-proxy'</p>
</li>
<li>
<p>The extension receives the request from the client, creates a new token for the needed document, and replies with a new url</p>
</li>
<li>
<p>The new url points toward <code>/docs/[docs-node-id]/[token]</code>, which will be proxied by nginx to the specific Docs Server node</p>
</li>
<li>
<p>The Docs Server will respond with the web application in Javascript</p>
</li>
<li>
<p>The web application opens a websocket connection, going through the nginx</p>
</li>
<li>
<p>Docs Server receives the websocket connection along with a token, sends a <code>read wopi</code> command towards the mailbox url indicated
in the parameters (the url is validates against allowed nodes)</p>
</li>
<li>
<p>The Extension validates the token and replies with information and content</p>
</li>
<li>
<p>The Docs Server node parses the document, renders it and sends it back to the client.</p>
</li>
<li>
<p>The document is fully opened and editable.</p>
</li>
</ol>
</div>
<div class="literalblock">
<div class="content">
<pre>Open document
                                  redirect to docs
    +------------------------+             +----------------------+
    |     Zimbra Proxy       |             |       Mailbox        |
    |                        +-------------&gt;                      |
    |      Nginx             |             | Zimbra Docs Extension|
    +------------------------+             +----------------------+
                      |                        |              ^
                      |                        |              |
                      |                        |             WOPI:
                      |                   Admin Web          Read/Write
                      |                   Socket             Documents
                      |                        |              |
                      |                        |              |
                      |                        |              |
                      |                    +---v----------------+
                      |                    |                    |
                      +--------------------&gt;   Docs Server      |
                   Load Client             |                    |
                   Open client websocket   +--------------------+</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_networking_and_ports">C.3. Networking and ports</h3>
<div class="paragraph">
<p>All mailbox servers will need to be able to directly communicate with the Docs Server over port 8443 (HTTPS Backend), which must be open on both ends.</p>
</div>
<div class="paragraph">
<p>The Docs Server communicates with the Extension through port 9091, so incoming traffic from all mailbox and proxy servers to that port must be allowed. The Docs Server component must also be able to directly communicate with the master LDAP server as well as with all Proxy servers.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.2<br>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.3/highlight.min.js"></script>
<script>
if (!hljs.initHighlighting.called) {
  hljs.initHighlighting.called = true
  ;[].slice.call(document.querySelectorAll('pre.highlight > code')).forEach(function (el) { hljs.highlightBlock(el) })
}
</script>
</body>
</html>